<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Udhira</title>
    
	
	<!-- core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <link href="css/animate.min.css" rel="stylesheet">
    <link href="css/prettyPhoto.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">
    <link href="css/responsive.css" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]-->       
    <link rel="shortcut icon" href="images/ico/favicon.png">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="images/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="images/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="images/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="images/ico/apple-touch-icon-57-precomposed.png">
</head><!--/head-->

<body class="homepage">

    <header id="header">

        <nav class="navbar navbar-inverse" role="banner">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="index.html"><img width="35" height="35" src="images/logo.png" alt="logo"></a>
                </div>
                <div class="navbar-brand">Udhira</div>

                <div class="collapse navbar-collapse navbar-right">
                    <ul class="nav navbar-nav">
                        <li class="active"><a href="#">Home</a></li>
                        <li><a href="about-us.html">About Us</a></li>
                        
                        <li><a href="register.html">Donor Registration</a></li>
                                               
                    </ul>
                </div>
            </div><!--/.container-->
        </nav><!--/nav-->
		
    </header><!--/header-->

    <section id="main-slider" class="no-margin">
        <div class="carousel slide">
            <ol class="carousel-indicators">
                <li data-target="#main-slider" data-slide-to="0" class="active"></li>
              
            </ol>
            <div class="carousel-inner">

                <div class="item active" style="background-image: url(images/slider/bg2.JPG)">
                    <div class="container">
                        <div class="row slide-margin">
                            <div class="col-sm-6">
                                <div class="carousel-content">
                                    <h1 style="color:rgb(140,0,0)" class="animation animated-item-1">Udhira 2018</h1>
                                    <h2 style="color:rgb(140,0,0)"  class="animation animated-item-2"> NCC Army </h2>
                                    
                                </div>
                            </div>



                        </div>
                    </div>
                </div><!--/.item

                <div class="item" style="background-image: url(images/slider/bg2.JPG)">
                    <div class="container">
                        <div class="row slide-margin">
                            <div class="col-sm-6">
                                <div class="carousel-content">
                                    <h1  class="animation animated-item-1">Anna University</h1>
                                    <h2   class="animation animated-item-2"> NCC Army </h2>
                                    
                                </div>
                            </div>



                        </div>
                    </div>
                </div><!--/.item

                <div class="item" style="background-image: url(images/slider/bg3.JPG)">
                    <div class="container">
                        <div class="row slide-margin">
                            <div class="col-sm-6">
                                <div class="carousel-content">
                                    <h1   class="animation animated-item-1">Udhira 2016</h1>
                                    <h2   class="animation animated-item-2"> NCC Army </h2>
                                    
                                </div>
                            </div>

                        </div>
                    </div>
                </div><!--/.item-->
            </div><!--/.carousel-inner-->
        </div><!--/.carousel
        <a class="prev hidden-xs" href="#main-slider" data-slide="prev">
            <i class="fa fa-chevron-left"></i>
        </a>
        <a class="next hidden-xs" href="#main-slider" data-slide="next">
            <i class="fa fa-chevron-right"></i>
        </a>
	-->
    </section><!--/#main-slider-->

    <section id="feature" >
        <div class="container">
            <div  class="center wow fadeInDown">
                <h2 >Nearby</h2>
                <p  class="lead">You can request blood in the below metioned sites. Marker in map shows the nearby availability of blood.</p>
            </div>
           <center><div id="loading" class="loader"></div></center>
            <div id="nomap"><section id="error" class="container text-center">
            <h1>Oops</h1>
            <p>Something went wrong here :(</p>
            </section><!--/#error--></div>
            <div class="col-xs-12 col-sm-4 col-md-3" id="map" style="width:100%;height:630px"></div>


               
        </div><!--/.container-->
    </section><!--/#feature-->

    
    
     <footer id="footer" class="midnight-blue">
        <div class="container">
            <div class="row">
                <div class="col-sm-6">
                    &copy; NCC - Army wing of 1 (TN) - CTC.
                </div>
                <div class="col-sm-6">
                    <ul class="pull-right">
                        <li><a href="#">Home</a></li>
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Faq</a></li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </footer><!--/#footer-->
    <script src="js/jquery.js"></script>
    <script type="text/javascript">
    $("document").ready(function(){

  $("#loading").hide();

  $(document).ajaxStart(function(){
    $("#loading").show();
    $("#map").hide();
    $("#nomap").hide();
});

$(document).ajaxComplete(function(){
    $("#loading").hide();
});

});




    function myMap() {
 
    
             $.ajax({
            method:"GET",
            url:"http://ec2-34-215-171-85.us-west-2.compute.amazonaws.com:5960/server/api/getCentreLocation",
            error: function(xhr, status, error) {
            //alert(xhr.responseText);
            $("#map").hide();
            

            }

        }).done(function(result){
            $("#nomap").hide();


            var inner=[];
            var locations=[];
            //alert(result.message.length)
            for(var i=0;i<result.message.length;i++){
                inner.push(result.message[i].centreName);
                inner.push(result.message[i].lattitude);
                inner.push(result.message[i].longitude);
                inner.push(result.message[i].centreId);
                locations.push(inner);
                inner=[];
            }








            var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 15,
      center: new google.maps.LatLng(13.0127, 80.2402),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var infowindow = new google.maps.InfoWindow();

    var marker, i;

    for (i = 0; i < locations.length; i++) { 
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][1], locations[i][2]),
        animation: google.maps.Animation.BOUNCE,
        map: map
      });

      google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
          infowindow.setContent(locations[i][0]);
          infowindow.open(map, marker);
        }
      })(marker, i));
    }
    

        });

}
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA-z8RzxVtfoJxB7Ax3YeIJGhhdWk5z4Lg&callback=myMap"></script>

    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.prettyPhoto.js"></script>
    <script src="js/jquery.isotope.min.js"></script>
    <script src="js/main.js"></script>
    <script src="js/wow.min.js"></script>
</body>
</html>
